var thunderProvider=function(){var e,g,f=!0,h,d=[[],[],[],[],[],[],[]],k=[[],[],[],[],[],[],[]],l=function(a){if(!f){var b=a-1,c=k[b][d[b].length];void 0===c&&(c=new Audio(globalConfig.thunderConfig.thunderAudioPath+"/thunder-"+a+".wav"));c.volume=h*globalConfig.thunderConfig.thunderVolume[globalConfig.thunderConfig.maxNumberKm-e+1];c.currentTime=0;c.addEventListener("ended",function(){var a=d[b].indexOf(c);d[b].splice(a,1)});c.play();d[b].push(c)}};return{initInstances:function(){for(var a={i:0};7>
a.i;a={i:a.i},a.i++)for(var b={},c=0;1>c;b={audio:b.audio},c++)b.audio=new Audio(globalConfig.thunderConfig.thunderAudioPath+"/thunder-"+(a.i+1)+".wav"),b.audio.volume=0,b.audio.play().then(function(a,b){return function(){a.audio.pause();k[b.i].push(a.audio)}}(b,a))},setTimeUntilThunder:function(a){e=a;g=3E3*a},scheduleThunder:function(){setTimeout(function(){var a=randomIntFromInterval(globalConfig.thunderConfig.possibleThunderVariations.lowestThunder,globalConfig.thunderConfig.possibleThunderVariations.highestThunder);
l(a)},g)},pause:function(){f=!0;d.forEach(function(a){a.forEach(function(a){a.pause()});a.length=0})},resume:function(){f=!1},changeVolume:function(a){h=a;var b=a*globalConfig.thunderConfig.thunderVolume[globalConfig.thunderConfig.maxNumberKm-e+1];d.forEach(function(a){a.forEach(function(a){a.volume=b})})}}}();
